{% extends "layout/base.html" %}
{% load static %}

{% block 'title' %}Dashboard{% endblock 'title' %}

{% block 'content' %}
{% include "include/Sidebar.html" %}
{% include "include/Navbar.html" %}

<div class="pt-20 p-4 sm:ml-64">
  <div>
    <h1 class="text-3xl font-bold mb-6">Welcome, Admin!</h1>

    <!-- Metrics Grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
      <div class="bg-white p-6 rounded-2xl shadow">
        <p class="text-gray-500">Total Products</p>
        <p class="text-2xl font-semibold">{{ total_products }}</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow">
        <p class="text-gray-500">Total Stock</p>
        <p class="text-2xl font-semibold">{{ total_stock }}</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow">
        <p class="text-gray-500">Out of Stock</p>
        <p class="text-2xl font-semibold">{{ out_of_stock }}</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow">
        <p class="text-gray-500">Orders</p>
        <p class="text-2xl font-semibold">{{ total_orders }}</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow">
        <p class="text-gray-500">Customers</p>
        <p class="text-2xl font-semibold">{{ total_customers }}</p>
      </div>
      <div class="bg-white p-6 rounded-2xl shadow">
        <p class="text-gray-500">Sold Units</p>
        <p class="text-2xl font-semibold">{{ sold_units }}</p>
      </div>
    </div>

    <!-- Pie Chart -->
    <div class="bg-white p-6 rounded-2xl shadow mb-10 w-full max-w-4xl">
      <h2 class="text-xl font-semibold mb-4">Inventory Values</h2>
      <canvas id="inventoryChart" width="400" height="200"></canvas>
    </div>
  </div>

  <script>
    const ctx = document.getElementById('inventoryChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Sold Units', 'Remaining Stock'],
        datasets: [{
          label: 'Inventory Split',
          data: [{{ sold_units }}, {{ total_stock }}],
          backgroundColor: ['#60a5fa', '#cbd5e1'],
          hoverOffset: 4
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'bottom'
          }
        }
      }
    });
  </script>
</div>
{% endblock 'content' %}